{% load static %}
{% load widget_tweaks %}
<!DOCTYPE html>
<html>
<head>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<style>
	
	.edit_blog{
		margin: 2rem;
		padding: 1.1rem;
		width: 46vw;
		background-color: aliceblue;
		border-radius:3rem;
		border:none;
		outline:none;
	}
	
	.title{
		margin-left:3.5rem;
		padding-left:1.5rem;
		font-size:15px;
		font-weight:bold;
	}
	
	
	
	.description{
		resize:none;
		margin-left:3.5rem;
		font-size:15px;
		font-weight:bold;
	}
	
	.picture_file{
		width:23vw;
		margin-left:3.5rem;
		outline:none;
		padding-left:1.5rem;
	}
	
	
	.edit_blog_form{
		width:50%;
		margin:7rem 5rem;
	}
	

</style>

</head>



<body>

<form class="edit_blog_form">
	
	<span class="title">Title :- </span>
	{{ form.title|add_class:"edit_blog title"|attr:"onchange:change_slug(this.value)" }}
		
	<span class="title">Description :- </span>
	{{ form.short_description|add_class:"edit_blog description" }}

    <div onchange="update_profile_image()">
	{{ form.picture|add_class:"edit_blog picture_file" }}
    </div>
    <div>
        <img style="width:20vw; height: auto" id='display_image' src="{{ form.picture.value.url }}" onclick="open_profile_pic_upload_box()">
    </div>
    <div>
    {{ form.media }}
    {{ form.body }}
    </div>

    <div>
	Url Slug : {{ form.slug }}
    </div>
    <div>
    <input type="submit" value="Edit Changes">
    </div>
</form>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script>
      file_upload_box = document.getElementById('{{ form.picture.id_for_label }}');
      function open_profile_pic_upload_box() {
        file_upload_box.click();
      }
      profile_image = document.getElementById('display_image');
      profile_image.onclick = open_profile_pic_upload_box();

      function update_profile_image() {


        if (file_upload_box.files && file_upload_box.files[0]) {
          let reader = new FileReader();

          reader.onload = function(e) {
            profile_image.src = e.target.result;
          };

          reader.readAsDataURL(file_upload_box.files[0]);
        }
      }


    </script>
<script>

    slug = document.getElementById('id_slug');
    title = document.getElementById('id_title');
    function change_slug(incoming_value) {
        slug.value = incoming_value.replace(' ', '-').toLowerCase();
    }

</script>
</body>


</html>

