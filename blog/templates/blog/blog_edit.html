{% load static %}
{% load widget_tweaks %}
<!DOCTYPE html>
<html>
<head>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<style>
	
	@import url('https://fonts.googleapis.com/css?family=Raleway');
	
	.edit_blog{
		margin: 0 0rem 7rem 2rem;
		padding: 1.1rem;
		width: 65vw;
		background-color: aliceblue;
		border-radius:3rem;
		border:none;
		outline:none;
		font-size:15px;
		font-weight:bold;
		color:#949494;
		box-shadow:1px 3px 3px 1px;
	}
	
	.title{
		margin-left:3.5rem;
		padding-left:1.5rem;
		
	}
	
	
	
	.title:after {
		margin-left:5.2rem;
		margin-bottom:0;
		content:' ';
		display:block;
		border:2px solid #d0d0d0;
		width:28px;
		border-radius:4px;
		-webkit-border-radius:4px;
		-moz-border-radius:4px;
		box-shadow:inset 0 1px 1px rgba(0, 0, 0, .05);
		-webkit-box-shadow:inset 0 1px 1px rgba(0, 0, 0, .05);
		-moz-box-shadow:inset 0 1px 1px rgba(0, 0, 0, .05);
	}
	
	
	.description{
		resize:none;
		margin-left:3.5rem;
	}
	
	.picture_file{
		width:30vw;

		outline:none;
		padding-left:1.5rem;
	}
	
	
	.edit_blog_form{
		width:50%;
		margin:7rem 5rem;
		font-family: 'Raleway', sans-serif;
	}
	
	
	span{
		font-size:25px;
		font-weight:bold;
		color:#594236
	}
	
    
	.edit_blog_body{
		background:url('../../static/blog/images/bg.png') no-repeat center;
		background-size:cover;
}
	
</style>

</head>



<body class="edit_blog_body">

<form class="edit_blog_form">
	
	<span class="title">Title :- </span>
	{{ form.title|add_class:"edit_blog title"|attr:"onchange:change_slug(this.value)"|attr:"placeholder:Add Title Here" }}
		
	<span class="title">Description :- </span>
	{{ form.short_description|add_class:"edit_blog description"|attr:"placeholder:Give a brief description here" }}

    
		<span class="title">Upload Picture :- </span>
	<div class="editor" onchange="update_profile_image()">
		{{ form.picture|add_class:"edit_blog picture_file" }}
    </div>
    <div class="editor">
        <img style="width:20vw; height: auto" id='display_image' src="{{ form.picture.value.url }}" onclick="open_profile_pic_upload_box()">
    </div>
    <div class="editor">
    {{ form.media }}
    {{ form.body }}
    </div>

	<span class="title">URL :- </span>
	{{form.slug|add_class:"edit_blog title"}}
    
    <div>
    <input type="submit" value="Edit Changes">
    </div>
</form>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script>
      file_upload_box = document.getElementById('{{ form.picture.id_for_label }}');
      function open_profile_pic_upload_box() {
        file_upload_box.click();
      }
      profile_image = document.getElementById('display_image');
      profile_image.onclick = open_profile_pic_upload_box();

      function update_profile_image() {


        if (file_upload_box.files && file_upload_box.files[0]) {
          let reader = new FileReader();

          reader.onload = function(e) {
            profile_image.src = e.target.result;
          };

          reader.readAsDataURL(file_upload_box.files[0]);
        }
      }


    </script>
<script>

    slug = document.getElementById('id_slug');
    title = document.getElementById('id_title');
    function change_slug(incoming_value) {
        slug.value = incoming_value.replace(' ', '-').toLowerCase();
    }

</script>
</body>


</html>

